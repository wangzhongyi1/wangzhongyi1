(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{283:function(t,s,a){t.exports=a.p+"assets/img/2-token.1ccc4716.png"},307:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"å‰ç«¯åŒtokenå®ç°æ— æ„Ÿåˆ·æ–°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰ç«¯åŒtokenå®ç°æ— æ„Ÿåˆ·æ–°"}},[t._v("#")]),t._v(" å‰ç«¯åŒtokenå®ç°æ— æ„Ÿåˆ·æ–°")]),t._v(" "),s("p",[s("img",{attrs:{src:a(283),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ç”¨åŒtokenæ— æ„Ÿåˆ·æ–°-å®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ç”¨åŒtokenæ— æ„Ÿåˆ·æ–°-å®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦ç”¨åŒTokenæ— æ„Ÿåˆ·æ–°ï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ")]),t._v(" "),s("p",[t._v("ä¸ºäº†ä¿è¯å®‰å…¨æ€§ï¼Œåç«¯è®¾ç½®çš„Tokenä¸å¯èƒ½é•¿æœŸæœ‰æ•ˆï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´Tokenå°±ä¼šå¤±æ•ˆã€‚è€Œå‘é€ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹åˆæ˜¯éœ€è¦æºå¸¦Tokençš„ï¼Œ")]),t._v(" "),s("p",[t._v("ä¸€æ—¦Tokenå¤±æ•ˆï¼Œç”¨æˆ·å°±è¦é‡æ–°ç™»å½•ï¼Œè¿™æ ·ç”¨æˆ·å¯èƒ½éœ€è¦é¢‘ç¹ç™»å½•ï¼Œä½“éªŒä¸å¥½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‡‡å–åŒTokenï¼ˆAccess_Tokenï¼ŒRefresh_Tokenï¼‰")]),t._v(" "),s("p",[t._v("æ— æ„Ÿåˆ·æ–°ï¼Œç”¨æˆ·å®Œå…¨æ„ŸçŸ¥ä¸åˆ°Tokençš„å˜åŒ–ï¼Œä½†å®é™…ä¸Šï¼ŒTokenå·²ç»åˆ·æ–°äº†")]),t._v(" "),s("h2",{attrs:{id:"è¿™ä¸¤ä¸ªtokenéƒ½æ˜¯å¹²ä»€ä¹ˆçš„-å…·ä½“è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿™ä¸¤ä¸ªtokenéƒ½æ˜¯å¹²ä»€ä¹ˆçš„-å…·ä½“è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„"}},[t._v("#")]),t._v(" è¿™ä¸¤ä¸ªTokenéƒ½æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿå…·ä½“è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ")]),t._v(" "),s("h3",{attrs:{id:"å‰ç½®æ¡ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰ç½®æ¡ä»¶"}},[t._v("#")]),t._v(" å‰ç½®æ¡ä»¶")]),t._v(" "),s("p",[t._v("åç«¯æä¾›ä¸€ä¸ªåˆ·æ–°Tokençš„æ¥å£ï¼Œå‡è®¾æ˜¯Aæ¥å£ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("ä¸¤ä¸ªTokençš„ä½œç”¨ï¼š\n"),s("ul",[s("li",[t._v("Access_Tokenï¼šç”¨äºé‰´å®šç”¨æˆ·èº«ä»½ï¼Œå³æ¯æ¬¡å‘é€ç½‘ç»œè¯·æ±‚éƒ½éœ€è¦æºå¸¦è¿™ä¸ªAccess_Token")]),t._v(" "),s("li",[t._v("Refresh_Tokenï¼šç”¨æˆ·åˆ·æ–°Access_Tokenï¼Œå³è°ƒç”¨Aæ¥å£éœ€è¦æºå¸¦Refresh_Tokenï¼Œç”¨å®ƒæ¢å¾—æœ€æ–°çš„Access_Token")])])])]),t._v(" "),s("h3",{attrs:{id:"è¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿‡ç¨‹"}},[t._v("#")]),t._v(" è¿‡ç¨‹")]),t._v(" "),s("p",[t._v("1ã€ç”¨æˆ·ç™»å½•å®¢æˆ·ç«¯ä¹‹åï¼Œæ¥æ”¶åç«¯å‘é€çš„ä¸¤ä¸ªTokenï¼Œå‰ç«¯æŠŠä»–ä»¬å­˜åœ¨LocalStorageæˆ–vuexä¸­\n2ã€Access_Tokenæœªè¿‡æœŸæ—¶ï¼Œå‘é€ç½‘ç»œè¯·æ±‚æºå¸¦Access_Tokenå³å¯\n3ã€Access_Tokenè¿‡æœŸåï¼Œå‰ç«¯æºå¸¦Refresh_Tokenè°ƒç”¨Aæ¥å£å¾—åˆ°æ–°çš„Access_Tokenï¼ŒæŠŠæ–°çš„Access_Tokenæ›¿æ¢æ—§çš„Access_Tokenå­˜å‚¨èµ·æ¥")]),t._v(" "),s("h3",{attrs:{id:"å…·ä½“å¦‚ä½•å®ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…·ä½“å¦‚ä½•å®ç°"}},[t._v("#")]),t._v(" å…·ä½“å¦‚ä½•å®ç°ï¼Ÿ")]),t._v(" "),s("p",[t._v("é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œè¿™ä¸ªæ— æ„Ÿåˆ·æ–°çš„é€»è¾‘è¦å†™åœ¨ axios çš„å“åº”æ‹¦æˆªå™¨é‡Œé¢")]),t._v(" "),s("ul",[s("li",[t._v("è¯´æ˜\n"),s("ul",[s("li",[t._v("isRefreshing ç”¨äºæ ‡è®°æ˜¯å¦æ­£åœ¨è°ƒç”¨ tokenRefreshAPIï¼Œç›¸å½“äºä¸€æŠŠé”")]),t._v(" "),s("li",[t._v("requesté˜Ÿåˆ—ç”¨äºå­˜å‚¨ tokenRefreshAPI å“åº”æœŸé—´è¿›å…¥çš„ promise å¯¹è±¡")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" isRefreshing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" requests "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// service æ˜¯è‡ªå·±é…ç½®çš„ axiosï¼Œåœ¨ axios é‡Œé¢é…ç½®ä¸€äº›åŸºæœ¬è®¾ç½®ï¼Œæ¯”å¦‚ï¼šbaseURL, timeout, headersçš„Authorizationï¼ˆä¸€èˆ¬æ˜¯ "Bearer" + Access_Tokenï¼‰')]),t._v("\nservice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// accesstoken è¶…æ—¶")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result_status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30002")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•å½“å‰ res")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("isRefreshing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                isRefreshing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenRefreshAPI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("r")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// refreshToken æ²¡è¿‡æœŸï¼Œåˆ·æ–°æˆåŠŸ")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result_status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡æ–°è®¾ç½® token")]),t._v("\n                        window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTtem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰§è¡Œå¤±æ•ˆçš„å‡½æ•°")]),t._v("\n                        requests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cb")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        requests "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å› ä¸ºç¬¬ä¸€ä¸ªè¯·æ±‚æ˜¯æ²¡æœ‰è¿› requests é˜Ÿåˆ—çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨è¿™ä¸ªé‡æ–°å‘èµ·è¯·æ±‚")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result_status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30011")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// refresh_token è¿‡æœŸï¼Œé‡æ–°ç™»å½•")]),t._v("\n                        window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("finally")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    isRefreshing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ï¼›\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token è¿‡æœŸï¼Œå‰©ä½™è¯·æ±‚å­˜å…¥é˜Ÿåˆ—'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" axiosConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›æœªæ‰§è¡Œ resolve çš„ Promise")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨å‡½æ•°å½¢å¼å°† resolve å­˜å…¥ï¼Œç­‰å¾…åˆ·æ–°åå†æ‰§è¡Œ")]),t._v("\n                    requests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sercice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("axiosConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"æ³¨æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨æ„"}},[t._v("#")]),t._v(" æ³¨æ„")]),t._v(" "),s("p",[t._v("1ã€åœ¨ Access_Token è¿‡æœŸåï¼Œå¯èƒ½ä¼šçŸ­æ—¶é—´å‘é€å¾ˆå¤šä¸ªç½‘ç»œè¯·æ±‚ï¼Œè¿™äº›ç½‘ç»œè¯·æ±‚ï¼Œåœ¨æ‹¦æˆªå™¨å†…ä¼šå…¨éƒ¨è¯·æ±‚åˆ·æ–°Tokenï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œ\nå…¶å®åªè¦åˆ·æ–°ä¸€æ¬¡å°±å¤Ÿäº†ï¼Œæ‰€ä»¥ç»™åˆ·æ–°Tokenè¿™éƒ¨æ“ä½œåŠ ä¸ªé”ğŸ”’ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦è®¾ç½® isRefreshing çš„åŸå› ã€‚")]),t._v(" "),s("p",[t._v("2ã€åœ¨è¯·æ±‚åˆ·æ–°Tokençš„å“åº”æ—¶é—´å†…ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªç½‘ç»œè¯·æ±‚åˆ°è¾¾ï¼Œæˆ‘ä»¬åˆæš‚æ—¶æ²¡æœ‰åŠæ³•å¤„ç†è¿™äº›è¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠè¿™äº›è¯·æ±‚ç”¨ Promise å°è£…å­˜å‚¨åˆ° requests é˜Ÿåˆ—ä¸­ï¼Œ\nç­‰åˆ·æ–°å¥½ Token ä¹‹åå†ä¾æ¬¡å¤„ç†è¿™äº› promise å¯¹è±¡ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);